{% extends 'base.html.twig' %}

{% block body %}
    <div class="card mt-5 shadow-sm">
        <div class="card-header">
            <h3 class="mb-0">Liste Réparation</h3>
        </div>
        <div class="card-body">
            <form method="get" action="{{ path('reparation_search') }}">
                <div class="form-group">
                    <input type="text" name="criteria" class="form-control" placeholder="Rechercher une reparation ici" value="{{ criteria }}">
                </div>
                <button type="submit" class="btn btn-primary">Rechercher</button>
            </form>
            {% if criteria %}
                {% if reparations is not empty %}
                    <ul class="list-group mt-4">
                        {% for reparation in reparations %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <a href="{{ path('reparation_show', {id: reparation.id}) }}">
                                    {{ reparation.description }}
                                </a>
                                <span class="badge badge-primary badge-pill">{{ reparation.cout }} GNF</span>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <div class="alert alert-warning mt-4" role="alert">
                        Aucun résultat trouvé pour "{{ criteria }}".
                    </div>
                {% endif %}
            {% else %}
                <div class="alert alert-info mt-4" role="alert">
                    Entrez un critère de recherche pour commencer.
                </div>
            {% endif %}
            <a href="{{ path('reparation_new') }}" class="btn btn-success mt-3">Enregistrer une Nouvelle Réparation</a>
        </div>
    </div>
{% endblock %}
